<h1>Lobby ID: <span class="lobby-id">{{ lobbyId }}</span></h1>

<!-- Form to join a lobby -->
<div *ngIf="!lobbyId" class="mb-3">
  <label for="roomCode" class="form-label">Enter Lobby Code:</label>
  <div class="d-flex align-items-center">
    <input
      type="text"
      id="roomCode"
      [(ngModel)]="inputLobbyId"
      placeholder="Enter lobby ID"
      class="form-control me-2"
    />
    <button
      class="btn btn-primary custom-button px-3 py-2"
      (click)="handleJoinLobby()"
    >
      Join Lobby
    </button>
  </div>
</div>

<!-- Button to create a new lobby -->
<div *ngIf="!lobbyId" class="mb-3">
  <button class="btn btn-secondary px-3 py-2" (click)="createLobby()">Create New Lobby</button>
</div>

<div *ngIf="lobbyId" class="col-12 col-lg-6 d-flex justify-content-center mb-3">
  <ngx-chess-board
    #chessBoard
    [size]="boardSize"
    [darkTileColor]="'#779557'"
    [dragDisabled]="true"
    [drawDisabled]="true"
    [lightTileColor]="'#ECECD0'"
    [pieceIcons]="{
      blackBishopUrl: 'assets/pieces/bb.svg',
      blackKingUrl: 'assets/pieces/bk.svg',
      blackKnightUrl: 'assets/pieces/bn.svg',
      blackPawnUrl: 'assets/pieces/bp.svg',
      blackQueenUrl: 'assets/pieces/bq.svg',
      blackRookUrl: 'assets/pieces/br.svg',
      whiteBishopUrl: 'assets/pieces/wb.svg',
      whiteKingUrl: 'assets/pieces/wk.svg',
      whiteKnightUrl: 'assets/pieces/wn.svg',
      whitePawnUrl: 'assets/pieces/wp.svg',
      whiteQueenUrl: 'assets/pieces/wq.svg',
      whiteRookUrl: 'assets/pieces/wr.svg'
    }"
  ></ngx-chess-board>
</div>

<!-- Display the list of players in the lobby -->
<div *ngIf="lobbyId">
  <h2>Players in Lobby:</h2>
  <ul id="playerList">
    <!-- Player list dynamically updated -->
  </ul>
  <button
    class="btn btn-danger custom-button px-3 py-2"
    (click)="resetLobby()"
  >
    Leave Lobby
  </button>
</div>

<!-- Table for displaying saved strategies -->
<!-- Table for displaying saved strategies -->
<div class="mt-5">
  <h2>My Saved Strategies</h2>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>#</th>
        <th>Strategy Name</th>
        <th>Owner</th>
        <th>Elo</th>
        <th>Wins</th>
        <th>Losses</th>
        <th>Description</th>
        <th>Strategy List</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let strategy of my_saved_strategies; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ strategy.name }}</td>
        <td>{{ strategy.owner }}</td>
        <td>{{ strategy.elo }}</td>
        <td>{{ strategy.wins }}</td>
        <td>{{ strategy.losses }}</td>
        <td>{{ strategy.description }}</td>
        <td>
          <ul>
            <li *ngFor="let item of strategy.strategy_list">
              <strong>{{ item.name }}</strong> (Type: {{ item['type'] }})
              <div>
                <strong>White Pieces:</strong>
                <ul>
                  <li>Pawn  : {{ item['whitePieces'].pawn }}</li>
                  <li>Knight: {{ item['whitePieces'].knight }}</li>
                  <li>Bishop: {{ item['whitePieces'].bishop }}</li>
                  <li>Rook  : {{ item['whitePieces'].rook }}</li>
                  <li>Queen : {{ item['whitePieces'].queen }}</li>
                  <li>King  : {{ item['whitePieces'].king }}</li>
                </ul>
              </div>
              <div>
                <strong>Black Pieces:</strong>
                <ul>
                  <li>Pawn  : {{ item['blackPieces'].pawn }}</li>
                  <li>Knight: {{ item['blackPieces'].knight }}</li>
                  <li>Bishop: {{ item['blackPieces'].bishop }}</li>
                  <li>Rook  : {{ item['blackPieces'].rook }}</li>
                  <li>Queen : {{ item['blackPieces'].queen }}</li>
                  <li>King  : {{ item['blackPieces'].king }}</li>
                </ul>
              </div>
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div>

